# 1.1 Real-life recommendations
## 1.1.1 Recommender systems are at home on the internet
pass

## 1.1.2 The long tail
### 파레토 법칙
상위 20%의 상품이 전체 매출의 80%를 달성한다는 이론

### 롱테일 효과
파레토 법칙에 반박. 하위 80%의 상품의 매출이 상위 20%의 매출보다 크다는 이론

파레토 법칙과 롱테일 효과의 개념을 염두해두고, 다음 두 예시를 보자.

### 오프라인 상점
오프라인 상점을 차렸다고 가정하자. 창고에 보관해둘 수 있는 상품의 수는 제한되어 있고, 상점 안에서 상품을 진열할 수 있는 공간 또한 제한되어 있다. 또한 고객이 직접 매장에 방문해야 하기 때문에 고객층도 제한되어 있다. 이러한 제한 때문에 우리는 잘 팔릴 법한 상품들만 창고에 쌓아두고, 진열해야 한다.

### 온라인 상점
온라인 상점의 경우는 다르다. 상품을 진열하는 데 별도의 비용이 들지 않고, 창고를 대여한다면 많은 상품을 저렴하게 보관할 수 있다. 심지어 온라인 컨텐츠를 판매하는 경우에는 보관 비용이 거의 들지 않는다.

오프라인 상점의 경우 파레토 법칙이, 온라인 상점의 경우 롱테일 효과가 잘 적용된다. '이제 온라인이 대세이니 롱테일 효과가 맞다. 즉, 안팔리는 80%의 상품도 중요하다'는 말을 하는 것으로 보인다.

그렇다면 고객은 무수한 상품 중 어떻게 자신이 원하는 상품을 찾을 수 있을까? 그 역할을 하는 것이 추천 시스템이다.

## 1.1.3 The Netflix recommender system
- Netflix의 웹사이트를 살펴보며 어떤 추천 시스템이 사용되었는지 연구

![KakaoTalk_20210727_110055225](https://user-images.githubusercontent.com/85201805/127090747-b5dc1bb1-7786-470f-8a91-a7f212524b63.jpg)

### 화면 구성
- **My list**: What's on my list
	- 내가 본 것
	- 내가 보고 있는 것
	- 내가 관심을 드러낸 것
- **Netflix Originals**: Netflix 자체 제작 컨텐츠
	- Netflix는 자체 컨텐츠 제작을 위해 큰 돈을 쓴다.
	- Netflix는 고객이 컨텐츠를 소비할 때, 컨텐츠 제작사에게 돈을 지불해야 하는데, 자체 컨텐츠를 소비하게 되면 그 돈이 Netflix로 돌아온다.
	- Netflix Originals에 가장 많은 지면을 할애한 이유는 비즈니스적인 이유(돈이 되니까) 때문
- **Trending Now**, **Popular on Netflix**
	- Trending Now는 짧은 기간 동안 인기 있었던 컨텐츠
	- Popular on Netflix는 긴 기간 동안 인기 있었던 컨텐츠
	- 이 둘은 Charts and Trends에 포함됨 ( chapter 5 )
- **My Recommendations**
	- 네 번째 행에는 나의 취향을 고려해 추천해주는 영화 목록이 있다.
	- 영화에 마우스를 올리면 해당 영화에 대한 설명과 추천  시스템이 예측한 '고객이 해당 영화를 좋아할 확률'이 나타난다.
	- 목록에는 예측 평점이 높은 영화만 나열한 것이 아니다. 86% 정도로 비교적 낮은 영화도 있는데, 이것은 Netflix가 추천의 정확성보다 다양성을 중요시하기 때문일 수 있다.

### 화면 뒤에 숨겨진 것
- 지금 My Recommendation의 제목은 'Top Picks for Kim Falk'이지만 어떤 것을 추천할 것인지에 따라 제목이 달라질 수 있다.
	- Because You Watched Suits: 'Suits'라는 영화를 봤기 때문에 그와 유사한 영화 추천
	- Comedies: Comedies 장르에 속하는 영화 추천
- 행의 제목도 추천의 결과이다. 즉, 고객이 Comedies 장르를 좋아하기 때문에 해당 장르를 추천하는 것이다.
- 이런 것을 이런 것을 **category recommendations**이라 한다.
- **Ranking**
	- 각 행은 여러 개의 영화로 이루어져 있다. 이 영화들은 추천 시스템이 결과로 도출한 **relevancy** 또는 **rank**를 기준으로 정렬되어 출력된다.
- **Boosting**
	- Netflix는 특정 컨텐츠의 예측 평점을 일부러 높여 추천 리스트에 포함되게 한다.
		- 고객이 즐겁게 본 시리즈의 새 에피소드가 나오면 신선도 측면에서 가산점을 부여하여 추천 리스트에 포함되게 함.

## 1.1.4 Recommender system definition

![KakaoTalk_20210727_110054884](https://user-images.githubusercontent.com/85201805/127095041-26903724-0d70-4ee4-aee5-e5923fb5563c.jpg)

### Top Picks를 계산하기 위한 단계
![image](https://user-images.githubusercontent.com/85201805/127095170-5fea0692-56bf-4eec-8c27-cc69f2223958.png)

1. 특정 고객을 대상으로 Top Picks를 알려달라는 요청을 받는다.
2. 서버는 상품 카탈로그로부터 고객의 취향에 가장 부합하는 상품 후보군을 추출한다. ( retrieve candidate items )
3. 상위 N개의 상품을 선택한다.
4. 유저 선호 데이터를 기반으로 각 상품의 평점을 예측한다. 이 과정에서 예측 평점이 낮은 것은 제외시킨다.
5. 남아있는 상품들을 order by relevance로 넘긴다.
6. 상품들은 고객의 취향, 상황, 인구통계학적 변수를 기반으로 정렬된다.
7. 6의 과정에서 고객과 관련이 없어 보이는 상품은 제외된다.
8. 결과를 서버로 보냄
9. 서버는 결과를 반환

 - 실제 평점을 예측하기 위한 부분은 전체 추천 시스템의 일부이며, 추천 시스템이 잘 작동하기 위해서는 다양한 것들이 필요하다.

### 추천에 사용되는 데이터
![image](https://user-images.githubusercontent.com/85201805/127100630-ebe4a07f-8ea9-4803-8a89-7b2386b46665.png)

# 1.2 Taxonomy of recommender systems
- 추천 시스템의 분류체계를 설명하기 위해서 domain, purpose, context, personalization level, whose opininos, privacy and trustworthiness, interfaces, algorithms를 다룬다.

## 1.2.1 Domain
- 도메인: 추천하고자 하는 상품의 종류
	- 넷플릭스의 경우 영화나 티비 시리즈가 도메인이 된다.
- 도메인이 중요한 이유
	1. 추천 시스템을 만들어 무엇을 할 것인가에 대한 힌트를 준다.
	2. 잘못된 추천 시스템이 미칠 영향력을 결정한다. 예를 들어, 도메인이 음악인 경우에는 잘못 추천을 하더라도 비용이 크지 않지만, 고아에게 양부모를 추천하는 시스템은 실패했을 경우 비용이 상당히 크다.
	3. 동일한 항목을 두 번 이상 추천할 수 있는지 여부를 결정한다.

## 1.2.2 Purpose
- 대부분의 경우 목표는 고객에게는 자신이 원하는 상품을 빠르게 찾도록 하고, 기업에게는 상품을 더 많이 팔수 있도록 하는 것
- proxy goal: 직접적인 목표가 아닌 다른 것을 측정하는 것을 대리 목표로 설정하여 측정하는 것
	- 의도하지 않은 다른 효과를 측정하게 될 수 있으므로 주의해야 함

## 1.2.3 Context
- Context: 고객이 추천 서비스를 받는 환경
	- 넷플릭스의 경우 컨텐츠를 소비하는 기기의 종류, 시간, 위치 등이 Context이다.
	- 비가 쏟아지는 상황에서 비를 피할 곳을 찾는 고객이 Google Maps에서 카페를 찾는다고 하자. Google이 고객의 Context를 잘 읽었다면 가장 가까운 카페를 추천해줘 비를 피할 수 있게 해줬을 것이다.

## 1.2.4 Personalization level
- 추천 시스템인 개인화 정도에 따라 나뉘는데, 아래 그림이 그것을 설명한다.
![image](https://user-images.githubusercontent.com/85201805/127248969-b7c1ac76-c24b-425e-83cc-07eb74c49be5.png)

### NON-PERSONALIZED
- 모든 고객의 취향이 동일하다고 가정하고, 같은 상품 목록을 추천
- 예) 가장 잘 팔리는 상품을 추천

### SEMI/SEGMENT-PERSONALIZED
- 고객을 특정 기준으로 군집화시켜 같은 군집에 속한 사람들의 취향을 반영하여 추천
- 나이, 국적, 직업 등 다양한 기준에 의해 군집을 만들 수 있다.

### PERSONALIZED
- 각 고객의 취향에 맞는 상품 추천
	- 예1) Amazon의 Recommend For You
	- 예2) Netflix의 시작 페이지
- Personlized 추천 시스템이 좋긴 하지만 보통은 Non-personalized와 semi-personalized를 섞어 쓴다.

## 1.2.5 Whose opinions
- Expert recommenders: 특정 전문가의 의견을 반영하여 추천 리스트를 만드는 시스템
	- 와인, 책 추천 등은 Expert recommenders가 강세였다.
- 이러한 추천 시스템에서는 Whose opinions이 중요했지만, 요새는 이런 추천 시스템을 잘 볼 수 없어, 이것의 중요성 또한 낮아졌다.

## 1.2.6 Privacy and trustworthiness
- Privacy: 고객의 개인 정보를 얼마나 잘 보호하는가
	- 고객이 허리 건강을 위해 특수 침대를 구입했다는 사실이 유출되었다고 가정하자. 이 사실이 보험사의 귀에 들어가 고객의 보험료를 올리는 원인이 된다면 상품을 구매한 고객이 피해를 입게 된다.
-  Trustworthiness: 고객이 추천 시스템을 얼마나 신뢰하는가
	- 대부분의 회사들은 상품을 더 많이 팔기 위해 추천 시스템을 운용하고 있고, 고객들도 그 사실을 잘 알고 있다. 그렇기 때문에 고객들은 추천 리스트를 보면 '회사가 나를 조종하려 든다'고 생각할 수 있다.
	- 회사에게 많이 남는 상품을 많이 판매하기 위해 고객에게 잘 맞지도 않는 상품을 추천하면 시스템에 대한 고객의 신뢰도가 낮아진다. => 고객이 이탈하게 됨

## 1.2.7 Interface
- interface: 추천 시스템의 input과 output
	- input (chapter 4에서 다룸)
		- explicit input
		- implicit input
	- output
		- output의 종류
			- predictions
			- recommendations
			- filtering
		- 추천을 추천이라 부를 수 있는가
			- organic presentation: 추천 리스트를 추천 시스템에 의한 것이라 명시하지 않는 것
			- nonorganic presentation: organic presentation의 반대
		- 추천 결과를 설명할 수 있는가
			- white-box recommenders: 해당 추천 리스트가 어떻게 나온 건지 설명 가능
			- black-box recommenders: white-box recommenders의 반대
			- 설명을 꼭 해야하는 상황이라면 white, 성능이 중요한 상황이라면 black을 선택. 보통 white에 해당하는 알고리즘이 좀 더 구현하기 쉬움
			- 설명력이 높아지면 성능이 낮아지고, 성능이 높아지면 설명력이 낮아지는 현상이 있는데, 이를 **model accuracy-model interpretation trade-off** 이라 한다.

## 1.2.8 Algorithms
- collaborative filtering: 사용자가 웹사이트를 이용한 내역을 바탕으로 추천 ( chapter 8, 11 )
- contentbased filtering: 상품 메타데이터 혹은 사용자 프로파일을 사용하여 추천 ( chapter 10 )
- hybrid recommenders: collaborative filtering + contentbased filtering ( chapter 12 )

# 1.3 Machine learning and the Netflix Prize
- 추천 시스템의 목표는 고객이 지금 어떤 상품을 필요로 하는지 예측하는 것
- 목표를 달성하는 방법은 여러가지가 있다.
- 많은 추천 시스템은 머신러닝 알고리즘을 사용하여 고객이 특정 상품에 대해 매길 평점을 예측하고, 상품에 대해 랭킹을 매긴다.
- 머신러닝을 통해 기대하는 바는 고객의 숨겨진 취향을 발견하여 추천을 하는 것이다.
- 실제로 Netflix는 머신러닝을 이용해 추천 문제를 해결하는 대회를 개최하였고, 넷플릭스가 사용하고 있던 알고리즘보다 10% 나은 성능을 낼 수 있기를 기대하였다.
- 10%를 개선한 팀은 3년이 지나서야 나왔다.
- Netflix는 우승팀의 알고리즘을 사용하지 않았다.

# 1.4 The MovieGEEKs website
- 이 책에서는 온라인 쇼핑몰의 추천 시스템을 실제로 구현하는 것이 목표이다.
- 이를 위해 '의뢰인이 이러이러한 추천 시스템을 만들어달라'고 부탁했다는 설정으로 시작한다.
- 의뢰 내용은 다음과 같다.

## 1.4.1 Design and specification

## 1.4.2 Architecture
- 사이트 구현을 위해 파이썬과 장고를 사용
- 장고를 사용하면 프로젝트를 파츠로 분리해낼 수 있다.
- 아래 그림은 high-level architecture를 보여주며, 우리가 어떤 것을 만들지 보여준다.
![image](https://user-images.githubusercontent.com/85201805/127267546-fcc33dd3-39d3-4d95-8dd4-f901aaa70e1a.png)

- **MovieGEEKs**: 이 사이트의 메인에 해당하는 부분이다. html, css, javascript가 있으며, 데이터를 추출하기 위한 파이썬 코드도 포함되어 있다.
- **Analytics**: 웹사이트에서 일어났던 일을 모니터링 ( chapter 4 )
- **Collector**: 고객의 행동을 추적하고 DB에 저장 ( chapter 2 )
- **Recs**: 핵심. 추천 목록을 만들어 MovieGEEKs에 전달
- **Recommendation builder**: 추천 결과를 미리 계산해둠 ( chapter 7 )

	### 페이지 생김새
	![image](https://user-images.githubusercontent.com/85201805/127268069-9432ad88-a0c0-4bc7-9e53-1ae4c8680b31.png)

# 1.5 Building a recommender system
- 추천 시스템은 다음과 같이 작동된다.

![image](https://user-images.githubusercontent.com/85201805/127270535-504e85c6-b5a4-4ba4-b0f4-1718cd6f3b61.png)

